(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21443,e=>{"use strict";e.s(["default",()=>w],21443);var t=e.i(43476),a=e.i(71645);function r(e){let{current:a,onChange:r}=e;return(0,t.jsx)("div",{className:"flex items-center gap-6 text-sm",children:[{key:"chat",label:"Chat"},{key:"history",label:"History"},{key:"new",label:"New thread"}].map(e=>(0,t.jsx)("button",{onClick:()=>r(e.key),className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}("pb-1 transition-colors",a===e.key?"text-gray-900 font-medium border-b-2 border-gray-900":"text-gray-500 hover:text-gray-800"),children:e.label},e.key))})}function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}function n(e){let{msg:a}=e,r="user"===a.role;return(0,t.jsx)("div",{className:s("w-full flex",r?"justify-end":"justify-start"),children:(0,t.jsx)("div",{className:s("max-w-[90%] rounded-2xl px-4 py-3 text-sm",r?"bg-gray-900 text-white":"bg-gray-100 text-gray-900"),children:a.content})})}var l=e.i(57688);function i(e){let{person:a,size:r=24}=e,s=a.name.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase();return a.avatar?(0,t.jsx)(l.default,{src:a.avatar,alt:a.name,width:r,height:r,className:"rounded-full object-cover"}):(0,t.jsx)("div",{className:"rounded-full bg-gray-200 text-gray-700 grid place-items-center font-medium",style:{width:r,height:r},title:a.name,children:(0,t.jsx)("span",{className:"text-[10px]",children:s})})}function o(e){let{m:a}=e;return(0,t.jsxs)("div",{className:"rounded-2xl border border-gray-200 p-4 bg-white shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:function(e,t){let a=new Date(e),r=new Date(t),s=e=>e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return"".concat(s(a)," – ").concat(s(r))}(a.start,a.end)}),(0,t.jsx)("div",{className:"text-gray-900 font-semibold mb-3",children:a.title}),(0,t.jsx)("div",{className:"flex -space-x-1",children:a.attendees.map(e=>(0,t.jsx)("div",{className:"ring-2 ring-white rounded-full",children:(0,t.jsx)(i,{person:e})},e.id))})]})}function c(e){return(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:(0,t.jsx)("path",{strokeWidth:"2",strokeLinecap:"round",d:"M12 5v14M5 12h14"})})}function d(e){return(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[(0,t.jsx)("path",{strokeWidth:"2",strokeLinecap:"round",d:"M12 3a3 3 0 0 1 3 3v6a3 3 0 1 1-6 0V6a3 3 0 0 1 3-3Z"}),(0,t.jsx)("path",{strokeWidth:"2",strokeLinecap:"round",d:"M19 10v2a7 7 0 0 1-14 0v-2M12 19v2"})]})}function x(e){return(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,t.jsx)("path",{d:"M13 2 3 14h7l-1 8 11-12h-7l1-8Z"})})}function h(e){return(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[(0,t.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),(0,t.jsx)("path",{d:"M16 2v4M8 2v4M3 10h18"})]})}function u(e){return(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[(0,t.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),(0,t.jsx)("path",{d:"M3 7l9 6 9-6"})]})}function m(e){let{value:a,onChange:r,onSend:s}=e;return(0,t.jsxs)("div",{className:"rounded-2xl border border-gray-200 p-2 bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-2 pt-2",children:[(0,t.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-200 hover:bg-gray-50",title:"Insert",children:(0,t.jsx)(c,{className:"h-4 w-4 text-gray-600"})}),(0,t.jsxs)("div",{className:"relative ml-auto",children:[(0,t.jsxs)("select",{className:"appearance-none rounded-full border border-gray-200 bg-white px-3 py-1 text-xs pr-6 text-gray-700",children:[(0,t.jsx)("option",{children:"All meetings"}),(0,t.jsx)("option",{children:"Last 30 days"}),(0,t.jsx)("option",{children:"Q2 2025"})]}),(0,t.jsx)("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",children:"▾"})]}),(0,t.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-200 hover:bg-gray-50",title:"Email",children:(0,t.jsx)(u,{className:"h-4 w-4 text-gray-600"})}),(0,t.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-200 hover:bg-gray-50",title:"Calendar",children:(0,t.jsx)(h,{className:"h-4 w-4 text-gray-600"})}),(0,t.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-200 hover:bg-gray-50",title:"Voice",children:(0,t.jsx)(d,{className:"h-4 w-4 text-gray-600"})})]}),(0,t.jsx)("textarea",{placeholder:"Ask anything about your meetings...",className:"mt-2 w-full resize-none rounded-xl px-3 py-2 text-sm outline-none placeholder:text-gray-400",rows:2,value:a,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s())}}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-2 pb-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1",children:[(0,t.jsx)(x,{className:"h-3 w-3"}),"Smart actions"]})}),(0,t.jsx)("button",{onClick:s,className:"rounded-full bg-gray-900 px-3 py-1.5 text-xs text-white hover:bg-black",children:"Send"})]})]})}async function g(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeoutMs:r=15e3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="".concat("http://localhost:8000/api").concat(e),n=new AbortController,l={method:"GET",headers:{"Content-Type":"application/json",...a.headers||{}},credentials:"include",...a,signal:n.signal},i=setTimeout(()=>n.abort(),r);try{t=await fetch(s,l)}catch(t){if(clearTimeout(i),t instanceof DOMException&&"AbortError"===t.name)throw Error("Request timed out");let e=t instanceof Error?t.message:String(t);throw Error("Network error: ".concat(e))}finally{clearTimeout(i)}let o=null,c=await t.text();try{o=c?JSON.parse(c):null}catch(e){o=c}if(!t.ok){let e="object"==typeof o&&null!==o&&"detail"in o&&o.detail||"object"==typeof o&&null!==o&&"message"in o&&o.message||t.statusText||"Request failed";throw Error("".concat(t.status," ").concat(e))}return o}async function y(){return g("/meetings",{method:"GET",cache:"no-store"})}async function p(){return g("/chat/messages",{method:"GET",cache:"no-store"})}async function f(e){return g("/chat/messages",{method:"POST",body:JSON.stringify({content:e,role:"user"})})}async function j(){return g("/chat/clear",{method:"POST"})}function b(e){return new Date(e).toLocaleDateString([],{weekday:"long",month:"long",day:"numeric",year:"numeric"})}function v(){let[e,s]=(0,a.useState)("chat"),[l,i]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[x,h]=(0,a.useState)(""),[u,g]=(0,a.useState)(!0),[v,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=!1;return(async()=>{try{g(!0),k(null);let[t,a]=await Promise.all([y(),p()]);e||(i(t),d(a))}catch(t){e||k(t instanceof Error?t.message:"Failed to load")}finally{e||g(!1)}})(),()=>{e=!0}},[]);let S=(0,a.useMemo)(()=>[...c.map(e=>({kind:"message",id:"msg-".concat(e.id),at:e.created_at,payload:e})),...l.map(e=>({kind:"meeting",id:"mtg-".concat(e.id),at:e.start_iso,payload:{id:e.id,title:e.title,start:e.start_iso,end:e.end_iso,attendees:e.attendees.people}}))].sort((e,t)=>new Date(e.at).getTime()-new Date(t.at).getTime()),[c,l]),C=(0,a.useRef)(null);async function T(){let e=x.trim();if(e&&!v)try{var t;N(!0),k(null);let a=await f(e);d(e=>[...e,...a.messages]),(null==(t=a.meetings)?void 0:t.length)&&i(a.meetings),h("")}catch(e){k(e instanceof Error?e.message:"Failed to send")}finally{N(!1)}}async function E(){try{k(null);let e=await j();d(e.messages),i(e.meetings),h("")}catch(e){k(e instanceof Error?e.message:"Failed to clear chat")}}(0,a.useEffect)(()=>{var e;null==(e=C.current)||e.scrollTo({top:C.current.scrollHeight,behavior:"smooth"})},[S]);let M=new Date("2025-05-13T11:17:00Z");return(0,t.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold",children:"Ask Anything"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:E,className:"text-xs rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50",title:"Clear chat",children:"Clear"}),(0,t.jsx)("button",{className:"text-gray-400 hover:text-gray-600",title:"Close",children:"✕"})]})]}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(r,{current:e,onChange:s})}),(0,t.jsx)("div",{className:"px-4",children:(0,t.jsxs)("div",{className:"my-2 text-center text-xs text-gray-500",children:[(0,t.jsx)("span",{className:"inline-block align-middle",children:"Context set to all meetings"}),(0,t.jsx)("span",{className:"mx-2",children:"—"}),(0,t.jsxs)("span",{children:[M.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})," –"," ",M.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"})]})]})}),w&&(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)("div",{className:"mb-2 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm px-3 py-2",children:w})}),(0,t.jsx)("div",{ref:C,className:"px-4 max-h-[60vh] overflow-auto py-4 space-y-3",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-16 w-2/3 rounded-2xl bg-gray-100 animate-pulse"}),(0,t.jsx)("div",{className:"h-16 w-1/2 rounded-2xl bg-gray-100 animate-pulse"}),(0,t.jsx)("div",{className:"h-24 w-full rounded-2xl bg-gray-100 animate-pulse"})]}):(0,t.jsxs)(t.Fragment,{children:[0===S.length&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"No messages yet. Say hello!"}),S.map((e,r)=>{let s=S[r-1],l=!s||b(s.at)!==b(e.at);return(0,t.jsxs)(a.default.Fragment,{children:[l&&(0,t.jsx)("div",{className:"pt-2 text-sm text-gray-500",children:b(e.at)}),"message"===e.kind?(0,t.jsx)(n,{msg:e.payload}):(0,t.jsx)(o,{m:{id:e.payload.id,title:e.payload.title,start:e.payload.start,end:e.payload.end,attendees:e.payload.attendees}})]},e.id)})]})}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-100",children:[(0,t.jsx)(m,{value:x,onChange:h,onSend:T}),v&&(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Sending…"})]})]})}e.i(47167);var N=e.i(86909);function w(){let[e,r]=(0,a.useState)(null),[s,n]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(0,N.getMe)().then(r).catch(()=>r({authenticated:!1})).finally(()=>n(!1))},[]),s)?(0,t.jsx)("main",{className:"min-h-[60vh] grid place-items-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Loading your dashboard…"})]})}):(null==e?void 0:e.authenticated)?(0,t.jsx)("main",{className:"min-h-screen bg-gray-50",children:(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)(v,{})})}):(0,t.jsx)("main",{className:"min-h-[60vh] grid place-items-center",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-8 shadow-sm text-center max-w-md w-full",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to AI Agent"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Please sign in to access your dashboard"}),(0,t.jsx)("button",{onClick:N.loginWithGoogle,className:"w-full rounded-full bg-blue-500 text-white px-6 py-3 hover:bg-blue-600 transition-colors font-medium",children:"Sign in with Google"})]})})}}]);